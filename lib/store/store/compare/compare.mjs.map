{"version":3,"sources":["../../../../src/store/store/compare/compare.ts"],"names":["gql","state","compare","getters","get","mutations","setCompare","actions","add","commit","dispatch","rootGetters","product","mutation","variables","id","Number","root","addToCompare","name","$i18n","global","t","remove","removeCompare"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAIA,OAAO,MAAMC,KAAY,GAAG;AAC1BC,EAAAA,OAAO,EAAE;AADiB,CAArB;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,OAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,UAAU,CAACL,KAAD,EAAQC,OAAR,EAAiB;AACzBD,IAAAA,KAAK,CAACC,OAAN,GAAgBA,OAAhB;AACD;;AAH2C,CAAvC;AAMP,OAAO,MAAMK,OAAqC,GAAG;AACnD,QAAMC,GAAN,cAA0D;AAAA,QAAhD;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,QAAV;AAAoBC,MAAAA;AAApB,KAAgD;AAAA,QAAb;AAAEC,MAAAA;AAAF,KAAa;AACxD,UAAMF,QAAQ,CACZ,eADY,EAEZ;AACEG,MAAAA,QAAQ,EAAEb,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfM;AAgBEc,MAAAA,SAAS,EAAE;AACTC,QAAAA,EAAE,EAAEC,MAAM,CAACJ,OAAO,CAACG,EAAT;AADD;AAhBb,KAFY,EAsBZ;AACEE,MAAAA,IAAI,EAAE;AADR,KAtBY,CAAd;;AA2BA,QAAI,CAACN,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCF,MAAAA,MAAM,CAAC,YAAD,EAAeE,WAAW,CAAC,YAAD,CAAX,CAA0BO,YAAzC,CAAN;AACAT,MAAAA,MAAM,CACJ,kBADI,EAEJG,OAAO,CAACO,IAAR,GACE,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,CAAlB,CACE,qDADF,CAHE,EAMJ;AAAEL,QAAAA,IAAI,EAAE;AAAR,OANI,CAAN;AAQD;AACF,GAxCkD;;AAyCnD,QAAMM,MAAN,eAAwD;AAAA,QAA3C;AAAEd,MAAAA,MAAF;AAAUC,MAAAA,QAAV;AAAoBC,MAAAA;AAApB,KAA2C;AAAA,QAAR;AAAEI,MAAAA;AAAF,KAAQ;AACtD,UAAML,QAAQ,CACZ,eADY,EAEZ;AACEG,MAAAA,QAAQ,EAAEb,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfM;AAgBEc,MAAAA,SAAS,EAAE;AACTC,QAAAA;AADS;AAhBb,KAFY,EAsBZ;AACEE,MAAAA,IAAI,EAAE;AADR,KAtBY,CAAd;;AA2BA,QAAI,CAACN,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCF,MAAAA,MAAM,CAAC,YAAD,EAAeE,WAAW,CAAC,YAAD,CAAX,CAA0Ba,aAAzC,CAAN;AACD;AACF;;AAxEkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\nimport { RootState } from \"vuefront-store\";\nimport { Product } from \"vuefront-api\";\nimport gql from \"graphql-tag\";\nexport type State = {\n  compare: Product[];\n};\nexport const state: State = {\n  compare: [],\n};\n\nexport const getters: GetterTree<State, RootState> = {\n  get(state) {\n    return state.compare;\n  },\n};\n\nexport const mutations: MutationTree<State> = {\n  setCompare(state, compare) {\n    state.compare = compare;\n  },\n};\n\nexport const actions: ActionTree<State, RootState> = {\n  async add({ commit, dispatch, rootGetters }, { product }) {\n    await dispatch(\n      \"apollo/mutate\",\n      {\n        mutation: gql`\n          mutation ($id: Int) {\n            addToCompare(id: $id) {\n              id\n              name\n              shortDescription\n              model\n              price\n              special\n              stock\n              image\n              imageLazy\n            }\n          }\n        `,\n        variables: {\n          id: Number(product.id),\n        },\n      },\n      {\n        root: true,\n      }\n    );\n\n    if (!rootGetters[\"vuefront/error\"]) {\n      commit(\"setCompare\", rootGetters[\"apollo/get\"].addToCompare);\n      commit(\n        \"notification/add\",\n        product.name +\n          this.$i18n.global.t(\n            \"elements.store.productThumb.compareNotificationText\"\n          ),\n        { root: true }\n      );\n    }\n  },\n  async remove({ commit, dispatch, rootGetters }, { id }) {\n    await dispatch(\n      \"apollo/mutate\",\n      {\n        mutation: gql`\n          mutation ($id: String) {\n            removeCompare(id: $id) {\n              id\n              name\n              shortDescription\n              model\n              price\n              special\n              stock\n              image\n              imageLazy\n            }\n          }\n        `,\n        variables: {\n          id,\n        },\n      },\n      {\n        root: true,\n      }\n    );\n\n    if (!rootGetters[\"vuefront/error\"]) {\n      commit(\"setCompare\", rootGetters[\"apollo/get\"].removeCompare);\n    }\n  },\n};\n"],"file":"compare.mjs"}