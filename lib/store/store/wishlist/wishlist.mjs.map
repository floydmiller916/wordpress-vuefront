{"version":3,"sources":["../../../../src/store/store/wishlist/wishlist.ts"],"names":["gql","state","wishlist","getters","get","mutations","setWishlist","actions","add","commit","dispatch","rootGetters","product","mutation","variables","id","Number","root","addToWishlist","name","$i18n","global","t","remove","removeWishlist"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,aAAhB;AAOA,OAAO,MAAMC,KAAY,GAAG;AAC1BC,EAAAA,QAAQ,EAAE;AADgB,CAArB;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,QAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,WAAW,CAACL,KAAD,EAAQC,QAAR,EAAkB;AAC3BD,IAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;AACD;;AAH2C,CAAvC;AAMP,OAAO,MAAMK,OAAqC,GAAG;AACnD,QAAMC,GAAN,CAAU;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,QAAV;AAAoBC,IAAAA;AAApB,GAAV,EAA6C;AAAEC,IAAAA;AAAF,GAA7C,EAA0D;AACxD,UAAMF,QAAQ,CACZ,eADY,EAEZ;AACEG,MAAAA,QAAQ,EAAEb,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAtBM;AAuBEc,MAAAA,SAAS,EAAE;AACTC,QAAAA,EAAE,EAAEC,MAAM,CAACJ,OAAO,CAACG,EAAT;AADD;AAvBb,KAFY,EA6BZ;AACEE,MAAAA,IAAI,EAAE;AADR,KA7BY,CAAd;;AAkCA,QAAI,CAACN,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCF,MAAAA,MAAM,CAAC,aAAD,EAAgBE,WAAW,CAAC,YAAD,CAAX,CAA0BO,aAA1C,CAAN;AACAT,MAAAA,MAAM,CACJ,kBADI,EAEJG,OAAO,CAACO,IAAR,GACE,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,CAAlB,CACE,sDADF,CAHE,EAMJ;AAAEL,QAAAA,IAAI,EAAE;AAAR,OANI,CAAN;AAQD;AACF,GA/CkD;;AAgDnD,QAAMM,MAAN,CAAa;AAAEd,IAAAA,MAAF;AAAUC,IAAAA,QAAV;AAAoBC,IAAAA;AAApB,GAAb,EAAgD;AAAEI,IAAAA;AAAF,GAAhD,EAAwD;AACtD,UAAML,QAAQ,CACZ,eADY,EAEZ;AACEG,MAAAA,QAAQ,EAAEb,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAtBM;AAuBEc,MAAAA,SAAS,EAAE;AACTC,QAAAA;AADS;AAvBb,KAFY,EA6BZ;AACEE,MAAAA,IAAI,EAAE;AADR,KA7BY,CAAd;;AAkCA,QAAI,CAACN,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCF,MAAAA,MAAM,CAAC,aAAD,EAAgBE,WAAW,CAAC,YAAD,CAAX,CAA0Ba,cAA1C,CAAN;AACD;AACF;;AAtFkD,CAA9C","sourcesContent":["import gql from \"graphql-tag\";\r\nimport { MutationTree, GetterTree, ActionTree } from \"vuex\";\r\nimport { RootState } from \"vuefront-store\";\r\nimport { Product } from \"vuefront-api\";\r\nexport type State = {\r\n  wishlist: Product[];\r\n};\r\nexport const state: State = {\r\n  wishlist: [],\r\n};\r\n\r\nexport const getters: GetterTree<State, RootState> = {\r\n  get(state) {\r\n    return state.wishlist;\r\n  },\r\n};\r\n\r\nexport const mutations: MutationTree<State> = {\r\n  setWishlist(state, wishlist) {\r\n    state.wishlist = wishlist;\r\n  },\r\n};\r\n\r\nexport const actions: ActionTree<State, RootState> = {\r\n  async add({ commit, dispatch, rootGetters }, { product }) {\r\n    await dispatch(\r\n      \"apollo/mutate\",\r\n      {\r\n        mutation: gql`\r\n          mutation ($id: Int) {\r\n            addToWishlist(id: $id) {\r\n              id\r\n              name\r\n              model\r\n              price\r\n              image\r\n              imageLazy\r\n              url(url: \"/store/product/_id\")\r\n              extra {\r\n                name\r\n                value\r\n              }\r\n              manufacturer {\r\n                id\r\n                name\r\n                url(url: \"/store/manufacturer/_id\")\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        variables: {\r\n          id: Number(product.id),\r\n        },\r\n      },\r\n      {\r\n        root: true,\r\n      }\r\n    );\r\n\r\n    if (!rootGetters[\"vuefront/error\"]) {\r\n      commit(\"setWishlist\", rootGetters[\"apollo/get\"].addToWishlist);\r\n      commit(\r\n        \"notification/add\",\r\n        product.name +\r\n          this.$i18n.global.t(\r\n            \"elements.store.productThumb.wishlistNotificationText\"\r\n          ),\r\n        { root: true }\r\n      );\r\n    }\r\n  },\r\n  async remove({ commit, dispatch, rootGetters }, { id }) {\r\n    await dispatch(\r\n      \"apollo/mutate\",\r\n      {\r\n        mutation: gql`\r\n          mutation ($id: String) {\r\n            removeWishlist(id: $id) {\r\n              id\r\n              name\r\n              model\r\n              price\r\n              image\r\n              imageLazy\r\n              url(url: \"/store/product/_id\")\r\n              extra {\r\n                name\r\n                value\r\n              }\r\n              manufacturer {\r\n                id\r\n                name\r\n                url(url: \"/store/manufacturer/_id\")\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        variables: {\r\n          id,\r\n        },\r\n      },\r\n      {\r\n        root: true,\r\n      }\r\n    );\r\n\r\n    if (!rootGetters[\"vuefront/error\"]) {\r\n      commit(\"setWishlist\", rootGetters[\"apollo/get\"].removeWishlist);\r\n    }\r\n  },\r\n};\r\n"],"file":"wishlist.mjs"}