{"version":3,"sources":["../../../../src/store/store/currency/currency.ts"],"names":["gql","state","currency","getters","get","mutations","setCurrency","actions","load","commit","data","$vfapollo","query","e","root","edit","dispatch","rootGetters","code","mutation","variables","editCurrency"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAMA,OAAO,MAAMC,KAAY,GAAG;AAC1BC,EAAAA,QAAQ,EAAE;AADgB,CAArB;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,QAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,WAAW,CAACL,KAAD,EAAQC,QAAR,EAAkB;AAC3BD,IAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;AACD;;AAH2C,CAAvC;AAMP,OAAO,MAAMK,OAAqC,GAAG;AACnD,QAAMC,IAAN,OAAuB;AAAA,QAAZ;AAAEC,MAAAA;AAAF,KAAY;;AACrB,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM,KAAKC,SAAL,CAAeC,KAAf,CAAqB;AAC1CA,QAAAA,KAAK,EAAEZ,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXkD,OAArB,CAAvB;AAcAS,MAAAA,MAAM,CAAC,aAAD,EAAgBC,IAAI,CAACR,QAArB,CAAN;AACD,KAhBD,CAgBE,OAAOW,CAAP,EAAU;AACVJ,MAAAA,MAAM,CAAC,2BAAD,EAA8BI,CAA9B,EAAiC;AACrCC,QAAAA,IAAI,EAAE;AAD+B,OAAjC,CAAN;AAGD;AACF,GAvBkD;;AAwBnD,QAAMC,IAAN,eAAwD;AAAA,QAA7C;AAAEN,MAAAA,MAAF;AAAUO,MAAAA,QAAV;AAAoBC,MAAAA;AAApB,KAA6C;AAAA,QAAV;AAAEC,MAAAA;AAAF,KAAU;AACtD,UAAMF,QAAQ,CACZ,eADY,EAEZ;AACEG,MAAAA,QAAQ,EAAEnB,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAXM;AAYEoB,MAAAA,SAAS,EAAE;AACTF,QAAAA;AADS;AAZb,KAFY,EAkBZ;AACEJ,MAAAA,IAAI,EAAE;AADR,KAlBY,CAAd;;AAuBA,QAAI,CAACG,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCR,MAAAA,MAAM,CAAC,aAAD,EAAgBQ,WAAW,CAAC,YAAD,CAAX,CAA0BI,YAA1C,CAAN;AACD;AACF;;AAnDkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\r\nimport { RootState } from \"vuefront-store\";\r\nimport { Currency } from \"vuefront-api\";\r\nimport gql from \"graphql-tag\";\r\n\r\nexport type State = {\r\n  currency: Currency[];\r\n};\r\n\r\nexport const state: State = {\r\n  currency: [],\r\n};\r\n\r\nexport const getters: GetterTree<State, RootState> = {\r\n  get(state) {\r\n    return state.currency;\r\n  },\r\n};\r\n\r\nexport const mutations: MutationTree<State> = {\r\n  setCurrency(state, currency) {\r\n    state.currency = currency;\r\n  },\r\n};\r\n\r\nexport const actions: ActionTree<State, RootState> = {\r\n  async load({ commit }) {\r\n    try {\r\n      const { data } = await this.$vfapollo.query({\r\n        query: gql`\r\n          {\r\n            currency {\r\n              code\r\n              symbol_left\r\n              symbol_right\r\n              title\r\n              active\r\n            }\r\n          }\r\n        `,\r\n      });\r\n\r\n      commit(\"setCurrency\", data.currency);\r\n    } catch (e) {\r\n      commit(\"vuefront/setResponseError\", e, {\r\n        root: true,\r\n      });\r\n    }\r\n  },\r\n  async edit({ commit, dispatch, rootGetters }, { code }) {\r\n    await dispatch(\r\n      \"apollo/mutate\",\r\n      {\r\n        mutation: gql`\r\n          mutation ($code: String) {\r\n            editCurrency(code: $code) {\r\n              code\r\n              symbol_left\r\n              symbol_right\r\n              title\r\n              active\r\n            }\r\n          }\r\n        `,\r\n        variables: {\r\n          code,\r\n        },\r\n      },\r\n      {\r\n        root: true,\r\n      }\r\n    );\r\n\r\n    if (!rootGetters[\"vuefront/error\"]) {\r\n      commit(\"setCurrency\", rootGetters[\"apollo/get\"].editCurrency);\r\n    }\r\n  },\r\n};\r\n"],"file":"currency.mjs"}