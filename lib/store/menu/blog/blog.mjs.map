{"version":3,"sources":["../../../../src/store/menu/blog/blog.ts"],"names":["gql","state","entities","getters","get","mutations","setEntities","categories","content","actions","load","commit","data","$vfapollo","query","variables","url","categoriesMenu","e","root"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAKA,OAAO,MAAMC,KAAK,GAAG,OAAO;AAC1BC,EAAAA,QAAQ,EAAE;AADgB,CAAP,CAAd;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,QAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,WAAW,CAACL,KAAD,EAAQM,UAAR,EAAoB;AAC7B,QAAIA,UAAJ,EAAgB;AACdN,MAAAA,KAAK,CAACC,QAAN,GAAiBK,UAAU,CAACC,OAA5B;AACD;AACF;;AAL2C,CAAvC;AAQP,OAAO,MAAMC,OAAqC,GAAG;AACnD,QAAMC,IAAN,CAAW;AAAEC,IAAAA;AAAF,GAAX,EAAuB;AACrB,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM,KAAKC,SAAL,CAAeC,KAAf,CAAqB;AAC1CA,QAAAA,KAAK,EAAEd,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SArBkD;AAsB1Ce,QAAAA,SAAS,EAAE;AACTC,UAAAA,GAAG,EAAE;AADI;AAtB+B,OAArB,CAAvB;AA2BAL,MAAAA,MAAM,CAAC,aAAD,EAAgBC,IAAI,CAACK,cAArB,CAAN;AACD,KA7BD,CA6BE,OAAOC,CAAP,EAAU;AACVP,MAAAA,MAAM,CAAC,2BAAD,EAA8BO,CAA9B,EAAiC;AACrCC,QAAAA,IAAI,EAAE;AAD+B,OAAjC,CAAN;AAGD;AACF;;AApCkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\nimport { RootState } from \"vuefront-store\";\nimport { IMenuLink } from \"../../common/menu/menu\";\nimport gql from \"graphql-tag\";\n\nexport type State = {\n  entities: IMenuLink[];\n};\nexport const state = () => ({\n  entities: [],\n});\n\nexport const getters: GetterTree<State, RootState> = {\n  get(state) {\n    return state.entities;\n  },\n};\n\nexport const mutations: MutationTree<State> = {\n  setEntities(state, categories) {\n    if (categories) {\n      state.entities = categories.content;\n    }\n  },\n};\n\nexport const actions: ActionTree<State, RootState> = {\n  async load({ commit }) {\n    try {\n      const { data } = await this.$vfapollo.query({\n        query: gql`\n          query ($url: String) {\n            categoriesMenu: categoriesBlogList(parent: 0, size: -1) {\n              content {\n                id\n                title: name\n                to: url(url: $url)\n                children: categories {\n                  id\n                  title: name\n                  to: url(url: $url)\n                  children: categories {\n                    id\n                    title: name\n                    to: url(url: $url)\n                  }\n                }\n              }\n            }\n          }\n        `,\n        variables: {\n          url: \"/blog/category/_id\",\n        },\n      });\n\n      commit(\"setEntities\", data.categoriesMenu);\n    } catch (e) {\n      commit(\"vuefront/setResponseError\", e, {\n        root: true,\n      });\n    }\n  },\n};\n"],"file":"blog.mjs"}