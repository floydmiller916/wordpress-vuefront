{"version":3,"sources":["../../../../src/store/menu/blog/blog.ts"],"names":["gql","state","entities","getters","get","mutations","setEntities","categories","content","actions","load","commit","data","$vfapollo","query","variables","url","categoriesMenu","e","root"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAKA,OAAO,MAAMC,KAAK,GAAG,OAAO;AAC1BC,EAAAA,QAAQ,EAAE;AADgB,CAAP,CAAd;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,QAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,WAAW,CAACL,KAAD,EAAQM,UAAR,EAAoB;AAC7B,QAAIA,UAAJ,EAAgB;AACdN,MAAAA,KAAK,CAACC,QAAN,GAAiBK,UAAU,CAACC,OAA5B;AACD;AACF;;AAL2C,CAAvC;AAQP,OAAO,MAAMC,OAAqC,GAAG;AACnD,QAAMC,IAAN,CAAW;AAAEC,IAAAA;AAAF,GAAX,EAAuB;AACrB,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM,KAAKC,SAAL,CAAeC,KAAf,CAAqB;AAC1CA,QAAAA,KAAK,EAAEd,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SArBkD;AAsB1Ce,QAAAA,SAAS,EAAE;AACTC,UAAAA,GAAG,EAAE;AADI;AAtB+B,OAArB,CAAvB;AA2BAL,MAAAA,MAAM,CAAC,aAAD,EAAgBC,IAAI,CAACK,cAArB,CAAN;AACD,KA7BD,CA6BE,OAAOC,CAAP,EAAU;AACVP,MAAAA,MAAM,CAAC,2BAAD,EAA8BO,CAA9B,EAAiC;AACrCC,QAAAA,IAAI,EAAE;AAD+B,OAAjC,CAAN;AAGD;AACF;;AApCkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\r\nimport { RootState } from \"vuefront-store\";\r\nimport { IMenuLink } from \"../../common/menu/menu\";\r\nimport gql from \"graphql-tag\";\r\n\r\nexport type State = {\r\n  entities: IMenuLink[];\r\n};\r\nexport const state = () => ({\r\n  entities: [],\r\n});\r\n\r\nexport const getters: GetterTree<State, RootState> = {\r\n  get(state) {\r\n    return state.entities;\r\n  },\r\n};\r\n\r\nexport const mutations: MutationTree<State> = {\r\n  setEntities(state, categories) {\r\n    if (categories) {\r\n      state.entities = categories.content;\r\n    }\r\n  },\r\n};\r\n\r\nexport const actions: ActionTree<State, RootState> = {\r\n  async load({ commit }) {\r\n    try {\r\n      const { data } = await this.$vfapollo.query({\r\n        query: gql`\r\n          query ($url: String) {\r\n            categoriesMenu: categoriesBlogList(parent: 0, size: -1) {\r\n              content {\r\n                id\r\n                title: name\r\n                to: url(url: $url)\r\n                children: categories {\r\n                  id\r\n                  title: name\r\n                  to: url(url: $url)\r\n                  children: categories {\r\n                    id\r\n                    title: name\r\n                    to: url(url: $url)\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        variables: {\r\n          url: \"/blog/category/_id\",\r\n        },\r\n      });\r\n\r\n      commit(\"setEntities\", data.categoriesMenu);\r\n    } catch (e) {\r\n      commit(\"vuefront/setResponseError\", e, {\r\n        root: true,\r\n      });\r\n    }\r\n  },\r\n};\r\n"],"file":"blog.mjs"}