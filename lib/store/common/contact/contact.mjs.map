{"version":3,"sources":["../../../../src/store/common/contact/contact.ts"],"names":["gql","state","contact","getters","get","mutations","setContact","payload","actions","send","dispatch","rootGetters","commit","contactData","mutation","variables","root","$i18n","global","t","message","data","$vfapollo","query","e"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAIA,OAAO,MAAMC,KAAY,GAAG;AAC1BC,EAAAA,OAAO,EAAE;AADiB,CAArB;AAIP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,GAAG,CAACH,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACC,OAAb;AACD;;AAHkD,CAA9C;AAMP,OAAO,MAAMG,SAA8B,GAAG;AAC5CC,EAAAA,UAAU,CAACL,KAAD,EAAQM,OAAR,EAAiB;AACzBN,IAAAA,KAAK,CAACC,OAAN,GAAgBK,OAAhB;AACD;;AAH2C,CAAvC;AAMP,OAAO,MAAMC,OAAqC,GAAG;AACnD,QAAMC,IAAN,CAAW;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,WAAZ;AAAyBC,IAAAA;AAAzB,GAAX,EAA8CC,WAA9C,EAA2D;AACzD,UAAMH,QAAQ,CACZ,eADY,EAEZ;AACEI,MAAAA,QAAQ,EAAEd,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA,SAPM;AAQEe,MAAAA,SAAS,EAAEF;AARb,KAFY,EAYZ;AACEG,MAAAA,IAAI,EAAE;AADR,KAZY,CAAd;;AAiBA,QAAI,CAACL,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCC,MAAAA,MAAM,CACJ,kBADI,EAEJ,KAAKK,KAAL,CAAWC,MAAX,CAAkBC,CAAlB,CAAoB,qCAApB,CAFI,EAGJ;AAAEH,QAAAA,IAAI,EAAE;AAAR,OAHI,CAAN;AAKA,aAAO,IAAP;AACD,KAPD,MAOO;AACLJ,MAAAA,MAAM,CAAC,oBAAD,EAAuBD,WAAW,CAAC,gBAAD,CAAX,CAA8BS,OAArD,CAAN;AACD;;AAED,WAAO,KAAP;AACD,GA/BkD;;AAgCnD,QAAMhB,GAAN,CAAU;AAAEM,IAAAA,QAAF;AAAYC,IAAAA,WAAZ;AAAyBC,IAAAA;AAAzB,GAAV,EAA6C;AAC3C,QAAI;AACF,YAAM;AAAES,QAAAA;AAAF,UAAW,MAAM,KAAKC,SAAL,CAAeC,KAAf,CAAqB;AAC1CA,QAAAA,KAAK,EAAEvB,GAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBkD,OAArB,CAAvB;AAyBAY,MAAAA,MAAM,CAAC,YAAD,EAAeS,IAAI,CAACnB,OAApB,CAAN;AACD,KA3BD,CA2BE,OAAOsB,CAAP,EAAU;AACVZ,MAAAA,MAAM,CAAC,2BAAD,EAA8BY,CAA9B,EAAiC;AACrCR,QAAAA,IAAI,EAAE;AAD+B,OAAjC,CAAN;AAGD;AACF;;AAjEkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\r\nimport { RootState } from \"vuefront-store\";\r\nimport { Contact } from \"vuefront-api\";\r\nimport gql from \"graphql-tag\";\r\nexport type State = {\r\n  contact: Contact;\r\n};\r\nexport const state: State = {\r\n  contact: {},\r\n};\r\n\r\nexport const getters: GetterTree<State, RootState> = {\r\n  get(state) {\r\n    return state.contact;\r\n  },\r\n};\r\n\r\nexport const mutations: MutationTree<State> = {\r\n  setContact(state, payload) {\r\n    state.contact = payload;\r\n  },\r\n};\r\n\r\nexport const actions: ActionTree<State, RootState> = {\r\n  async send({ dispatch, rootGetters, commit }, contactData) {\r\n    await dispatch(\r\n      \"apollo/mutate\",\r\n      {\r\n        mutation: gql`\r\n          mutation ($name: String, $email: String, $message: String) {\r\n            contactSend(name: $name, email: $email, message: $message) {\r\n              status\r\n            }\r\n          }\r\n        `,\r\n        variables: contactData,\r\n      },\r\n      {\r\n        root: true,\r\n      }\r\n    );\r\n\r\n    if (!rootGetters[\"vuefront/error\"]) {\r\n      commit(\r\n        \"notification/add\",\r\n        this.$i18n.global.t(\"elements.common.contact.successText\"),\r\n        { root: true }\r\n      );\r\n      return true;\r\n    } else {\r\n      commit(\"notification/error\", rootGetters[\"vuefront/error\"].message);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  async get({ dispatch, rootGetters, commit }) {\r\n    try {\r\n      const { data } = await this.$vfapollo.query({\r\n        query: gql`\r\n          {\r\n            contact {\r\n              locations {\r\n                address\r\n                fax\r\n                image\r\n                geocode\r\n                telephone\r\n                open\r\n                comment\r\n              }\r\n              address\r\n              email\r\n              fax\r\n              comment\r\n              open\r\n              store\r\n              telephone\r\n            }\r\n          }\r\n        `,\r\n      });\r\n\r\n      commit(\"setContact\", data.contact);\r\n    } catch (e) {\r\n      commit(\"vuefront/setResponseError\", e, {\r\n        root: true,\r\n      });\r\n    }\r\n  },\r\n};\r\n"],"file":"contact.mjs"}