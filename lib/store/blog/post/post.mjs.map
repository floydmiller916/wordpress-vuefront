{"version":3,"sources":["../../../../src/store/blog/post/post.ts"],"names":["gql","state","entities","post","getters","list","get","mutations","setEntities","posts","setPost","actions","addReview","reviewData","commit","dispatch","rootGetters","mutation","variables","root","addBlogPostReview"],"mappings":"AAGA,OAAOA,GAAP,MAAgB,aAAhB;AAKA,OAAO,MAAMC,KAAY,GAAG;AAC1BC,EAAAA,QAAQ,EAAE,EADgB;AAE1BC,EAAAA,IAAI,EAAE;AAFoB,CAArB;AAKP,OAAO,MAAMC,OAAqC,GAAG;AACnDC,EAAAA,IAAI,CAACJ,KAAD,EAAQ;AACV,WAAOA,KAAK,CAACC,QAAb;AACD,GAHkD;;AAInDI,EAAAA,GAAG,CAACL,KAAD,EAAQ;AACT,WAAOA,KAAK,CAACE,IAAb;AACD;;AANkD,CAA9C;AASP,OAAO,MAAMI,SAA8B,GAAG;AAC5CC,EAAAA,WAAW,CAACP,KAAD,EAAQQ,KAAR,EAAe;AACxBR,IAAAA,KAAK,CAACC,QAAN,GAAiBO,KAAjB;AACD,GAH2C;;AAI5CC,EAAAA,OAAO,CAACT,KAAD,EAAQE,IAAR,EAAc;AACnBF,IAAAA,KAAK,CAACE,IAAN,GAAaA,IAAb;AACD;;AAN2C,CAAvC;AASP,OAAO,MAAMQ,OAAqC,GAAG;AACnD,QAAMC,SAAN,OAAmDC,UAAnD,EAA+D;AAAA,QAA/C;AAAEC,MAAAA,MAAF;AAAUC,MAAAA,QAAV;AAAoBC,MAAAA;AAApB,KAA+C;AAC7D,UAAMD,QAAQ,CACZ,eADY,EAEZ;AACEE,MAAAA,QAAQ,EAAEjB,GAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAtDM;AAuDEkB,MAAAA,SAAS,EAAEL;AAvDb,KAFY,EA2DZ;AACEM,MAAAA,IAAI,EAAE;AADR,KA3DY,CAAd;;AAgEA,QAAI,CAACH,WAAW,CAAC,gBAAD,CAAhB,EAAoC;AAClCF,MAAAA,MAAM,CAAC,SAAD,EAAYE,WAAW,CAAC,YAAD,CAAX,CAA0BI,iBAAtC,CAAN;AACD;AACF;;AArEkD,CAA9C","sourcesContent":["import { MutationTree, GetterTree, ActionTree } from \"vuex\";\r\nimport { Post, PostResult } from \"vuefront-api\";\r\nimport { RootState } from \"vuefront-store\";\r\nimport gql from \"graphql-tag\";\r\nexport type State = {\r\n  post: Post;\r\n  entities: PostResult;\r\n};\r\nexport const state: State = {\r\n  entities: {},\r\n  post: {},\r\n};\r\n\r\nexport const getters: GetterTree<State, RootState> = {\r\n  list(state) {\r\n    return state.entities;\r\n  },\r\n  get(state) {\r\n    return state.post;\r\n  },\r\n};\r\n\r\nexport const mutations: MutationTree<State> = {\r\n  setEntities(state, posts) {\r\n    state.entities = posts;\r\n  },\r\n  setPost(state, post) {\r\n    state.post = post;\r\n  },\r\n};\r\n\r\nexport const actions: ActionTree<State, RootState> = {\r\n  async addReview({ commit, dispatch, rootGetters }, reviewData) {\r\n    await dispatch(\r\n      \"apollo/mutate\",\r\n      {\r\n        mutation: gql`\r\n          mutation (\r\n            $id: String\r\n            $content: String\r\n            $author: String\r\n            $rating: Float\r\n          ) {\r\n            addBlogPostReview(\r\n              id: $id\r\n              content: $content\r\n              author: $author\r\n              rating: $rating\r\n            ) {\r\n              id\r\n              title\r\n              description\r\n              image\r\n              imageLazy\r\n              datePublished\r\n              rating\r\n              categories {\r\n                id\r\n                name\r\n                url(url: \"/blog/category/_id\")\r\n              }\r\n              prev {\r\n                id\r\n                name\r\n                image\r\n                imageLazy\r\n                shortDescription\r\n                keyword\r\n              }\r\n              next {\r\n                id\r\n                name\r\n                image\r\n                imageLazy\r\n                shortDescription\r\n                keyword\r\n              }\r\n              reviews {\r\n                totalElements\r\n                content {\r\n                  author\r\n                  author_email\r\n                  content\r\n                  created_at\r\n                  rating\r\n                }\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        variables: reviewData,\r\n      },\r\n      {\r\n        root: true,\r\n      }\r\n    );\r\n\r\n    if (!rootGetters[\"vuefront/error\"]) {\r\n      commit(\"setPost\", rootGetters[\"apollo/get\"].addBlogPostReview);\r\n    }\r\n  },\r\n};\r\n"],"file":"post.mjs"}